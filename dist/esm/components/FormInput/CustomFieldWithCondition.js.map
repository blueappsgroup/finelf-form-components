{"version":3,"sources":["../../../../src/components/FormInput/CustomFieldWithCondition.tsx"],"names":["React","useContext","useEffect","useState","Field","useFormikContext","FormContext","setFormValuesToCache","CustomFieldWithCondition","props","values","errors","setErrors","setValues","id","required","setRequired","visible","setVisible","visibleCondition","requiredCondition","isRequired","Object","keys","some","key","includes","name","isVisible","undefined","validate"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useEffect, useState } from 'react'\nimport { Field, useFormikContext } from 'formik'\nimport { FormContext, setFormValuesToCache } from '../../utils'\n\ntype Props = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  requiredCondition?: { [key: string]: any }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  visibleCondition?: { [key: string]: any }\n}\nconst CustomFieldWithCondition: FC<Props> = (props) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { values, errors, setErrors, setValues } = useFormikContext<any>()\n  const { id } = useContext(FormContext)\n  const [required, setRequired] = useState(props.required || false)\n  const [visible, setVisible] = useState<boolean>(\n    (props.visibleCondition && false) || true\n  )\n\n  useEffect(() => {\n    if (!props.required && props.requiredCondition) {\n      let isRequired = false\n\n      Object.keys(props.requiredCondition).some((key) => {\n        if (\n          props.requiredCondition &&\n          props.requiredCondition[key].includes(values[key])\n        ) {\n          isRequired = true\n          return true\n        }\n\n        return false\n      })\n\n      if (required !== isRequired) {\n        setRequired(isRequired)\n      }\n    }\n  }, [values, props.required, props.requiredCondition, required, props.name])\n\n  useEffect(() => {\n    if (props.visibleCondition) {\n      let isVisible = false\n\n      Object.keys(props.visibleCondition).some((key) => {\n        if (\n          props.visibleCondition &&\n          props.visibleCondition[key].includes(values[key])\n        ) {\n          isVisible = true\n\n          return true\n        }\n\n        return false\n      })\n\n      if (!isVisible && isVisible !== visible) {\n        setValues({ ...values, [props.name]: undefined }, false)\n        setErrors({ ...errors, [props.name]: undefined })\n        setFormValuesToCache({ ...values, [props.name]: undefined }, id)\n        setVisible(isVisible)\n      }\n\n      if (isVisible && isVisible !== visible) {\n        setVisible(isVisible)\n      }\n    }\n  }, [\n    values,\n    setValues,\n    props.visibleCondition,\n    props.name,\n    visible,\n    errors,\n    setErrors,\n    id,\n  ])\n\n  return (\n    <Field\n      {...props}\n      required={required && visible}\n      validate={props.validate(required && visible)}\n      visible={visible}\n    />\n  )\n}\n\nexport default CustomFieldWithCondition\n"],"file":"CustomFieldWithCondition.js"}