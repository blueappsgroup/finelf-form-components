{"version":3,"sources":["../../../../src/components/OptionalGroup/index.tsx"],"names":["React","useContext","useEffect","useMemo","useFormikContext","CheckboxField","FormContext","setFormValuesToCache","OptionalGroup","name","label","children","hideChecked","values","setValues","id","hasManyItems","Array","isArray","itemsNames","map","item","props","itemsForResetValues","reduce","acc","undefined","groupVisible","newValues","groupType","defaultProps"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,SAASC,gBAAT,QAAiC,QAAjC;AACA,SAASC,aAAT,QAA8B,KAA9B;AACA,SAASC,WAAT,EAAsBC,oBAAtB,QAAkD,aAAlD;;AAWA,MAAMC,aAA8B,GAAG,CAAC;AACtCC,EAAAA,IADsC;AAEtCC,EAAAA,KAFsC;AAGtCC,EAAAA,QAHsC;AAItCC,EAAAA;AAJsC,CAAD,KAKjC;AACJ;AACA,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAwBV,gBAAgB,EAA9C;AACA,QAAM;AAAEW,IAAAA;AAAF,MAASd,UAAU,CAACK,WAAD,CAAzB;AACA,QAAMU,YAAY,GAAGC,KAAK,CAACC,OAAN,CAAcP,QAAd,CAArB;AACA,QAAMQ,UAAoB,GAAGhB,OAAO,CAClC,MACEa,YAAY,GACRL,QAAQ,IACRA,QAAQ,CAACS,GAAT,CAAcC,IAAD,IAAuCA,IAAI,CAACC,KAAL,CAAWb,IAA/D,CAFQ,GAGR,CAACE,QAAQ,CAACW,KAAT,CAAeb,IAAhB,CAL4B,EAMlC,CAACO,YAAD,EAAeL,QAAf,CANkC,CAApC;AASA,QAAMY,mBAAmB,GAAGpB,OAAO,CACjC,MACEgB,UAAU,CAACK,MAAX,CAAkB,CAACC,GAAD,EAAMJ,IAAN,KAAe;AAC/BI,IAAAA,GAAG,CAACJ,IAAD,CAAH,GAAYK,SAAZ;AACA,WAAOD,GAAP,CAF+B,CAG/B;AACD,GAJD,EAIG,EAJH,CAF+B,EAOjC,CAACN,UAAD,CAPiC,CAAnC;AASA,QAAMQ,YAAY,GACff,WAAW,IAAI,CAACC,MAAM,CAACJ,IAAD,CAAvB,IAAmC,CAACG,WAAD,IAAgBC,MAAM,CAACJ,IAAD,CAD3D;AAGAP,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACyB,YAAL,EAAmB;AACjB,YAAMC,SAAS,mCAAQf,MAAR,GAAmBU,mBAAnB,CAAf;;AACAT,MAAAA,SAAS,CAACc,SAAD,EAAY,KAAZ,CAAT;AACArB,MAAAA,oBAAoB,CAACqB,SAAD,EAAYb,EAAZ,CAApB;AACD,KALa,CAMd;;AACD,GAPQ,EAON,CAACY,YAAD,EAAeJ,mBAAf,EAAoCT,SAApC,EAA+CD,MAAM,CAACJ,IAAD,CAArD,CAPM,CAAT;AASA,sBACE,uDACE,oBAAC,aAAD;AAAe,IAAA,eAAe,MAA9B;AAA+B,IAAA,EAAE,EAAEA,IAAnC;AAAyC,IAAA,IAAI,EAAEA,IAA/C;AAAqD,IAAA,KAAK,EAAEC;AAA5D,IADF,EAEGiB,YAAY,iBAAI,0CAAGhB,QAAH,CAFnB,CADF;AAMD,CA9CD;;;AAREF,EAAAA,I;AAEAE,EAAAA,Q;AACAD,EAAAA,K;AACAmB,EAAAA,S;AACAjB,EAAAA,W;;AAmDFJ,aAAa,CAACsB,YAAd,GAA6B;AAC3BD,EAAAA,SAAS,EAAE;AADgB,CAA7B;AAIA,eAAerB,aAAf","sourcesContent":["import React, { useContext, useEffect, useMemo } from 'react'\nimport { useFormikContext } from 'formik'\nimport { CheckboxField } from '../'\nimport { FormContext, setFormValuesToCache } from '../../utils'\n\ntype Props = {\n  name: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  children: any\n  label: string\n  groupType?: string\n  hideChecked?: boolean\n}\n\nconst OptionalGroup: React.FC<Props> = ({\n  name,\n  label,\n  children,\n  hideChecked,\n}) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { values, setValues } = useFormikContext<any>()\n  const { id } = useContext(FormContext)\n  const hasManyItems = Array.isArray(children)\n  const itemsNames: string[] = useMemo(\n    () =>\n      hasManyItems\n        ? children &&\n          children.map((item: { props: { name: string } }) => item.props.name)\n        : [children.props.name],\n    [hasManyItems, children]\n  )\n\n  const itemsForResetValues = useMemo(\n    () =>\n      itemsNames.reduce((acc, item) => {\n        acc[item] = undefined\n        return acc\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      }, {} as { [key: string]: any }),\n    [itemsNames]\n  )\n  const groupVisible =\n    (hideChecked && !values[name]) || (!hideChecked && values[name])\n\n  useEffect(() => {\n    if (!groupVisible) {\n      const newValues = { ...values, ...itemsForResetValues }\n      setValues(newValues, false)\n      setFormValuesToCache(newValues, id)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [groupVisible, itemsForResetValues, setValues, values[name]])\n\n  return (\n    <>\n      <CheckboxField skipFieldForApi id={name} name={name} label={label} />\n      {groupVisible && <>{children}</>}\n    </>\n  )\n}\n\nOptionalGroup.defaultProps = {\n  groupType: 'optionalGroup',\n}\n\nexport default OptionalGroup\n"],"file":"index.js"}