{"version":3,"sources":["../../../../src/components/Step/index.tsx"],"names":["React","useContext","useEffect","useMemo","useState","styled","useFormikContext","Button","StepHeader","FormContext","device","Wrapper","div","props","visible","ButtonsWrapper","mobileL","isFirstStep","tablet","StepHeaderWrapper","Step","children","stepIndex","currentStep","stepsLength","stepsTitleList","prevStep","nextStep","values","errors","mappedFields","Array","isArray","reduce","acc","item","name","required","mappedChildrens","forEach","child","nextButtonDisabled","setNextButtonDisabled","JSON","stringify","lastStepIndex","hasError","Object","keys","some","key"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useEffect, useMemo, useState } from 'react'\nimport styled from 'styled-components'\nimport { useFormikContext } from 'formik'\n\nimport Button from '../Button'\nimport StepHeader from './StepHeader'\nimport { FormContext } from '../../utils'\nimport { device } from '../../consts/sizes'\n\nconst Wrapper = styled.div<{ visible: boolean }>`\n  display: ${(props): string => (props.visible ? 'block' : 'none')};\n`\n\ntype ButtonWrapperTypes = { isFirstStep: boolean }\n\n// prettier-ignore\nconst ButtonsWrapper = styled.div<ButtonWrapperTypes>`\n  display: flex;\n  flex-direction: column;\n  \n  & button {\n    flex-grow: 1;\n  }\n\n  @media ${device.mobileL} {\n    flex-direction: row;\n\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n    }\n  }\n\n  @media ${device.tablet} {\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n    }\n  }\n`\n\nconst StepHeaderWrapper = styled.div`\n  display: flex;\n`\n\ntype Props = {\n  stepIndex: number\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  children: any\n}\n\nconst Step: FC<Props> = ({ children, stepIndex }) => {\n  const {\n    currentStep = 0,\n    stepsLength = 1,\n    stepsTitleList,\n    prevStep,\n    nextStep,\n  } = useContext(FormContext)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { values, errors } = useFormikContext<any>()\n  const mappedFields = useMemo(\n    () =>\n      (Array.isArray(children) ? children : [children]).reduce((acc, item) => {\n        if (item.props.name && item.props.required) {\n          acc[item.props.name] = true\n        }\n        if (item.props.children) {\n          const mappedChildrens = Array.isArray(item.props.children)\n            ? item.props.children\n            : [item.props.children]\n\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          mappedChildrens.forEach((child: any) => {\n            if (child.props.name && child.props.required) {\n              if (item.props.name) {\n                acc[item.props.name][child.props.name] = true\n                return\n              }\n\n              acc[child.props.name] = true\n            }\n          })\n        }\n\n        return acc\n      }, {}),\n    [children]\n  )\n  const [nextButtonDisabled, setNextButtonDisabled] = useState(\n    JSON.stringify(mappedFields) !== JSON.stringify({})\n  )\n  const lastStepIndex = stepsLength ? stepsLength - 1 : 0\n\n  useEffect(() => {\n    let hasError\n\n    Object.keys(mappedFields).some((key: string) => {\n      if (!values[key] || values[key] === '' || errors[key]) {\n        hasError = true\n        return true\n      }\n\n      return false\n    })\n\n    if (hasError) {\n      setNextButtonDisabled(true)\n    }\n\n    if (!hasError) {\n      setNextButtonDisabled(false)\n    }\n  }, [values, errors, mappedFields])\n\n  return (\n    <Wrapper visible={stepIndex === currentStep}>\n      <StepHeaderWrapper>\n        {currentStep !== 0 && (\n          <StepHeader>\n            {stepsTitleList && stepsTitleList[currentStep - 1]}\n          </StepHeader>\n        )}\n        {stepIndex === currentStep && (\n          <StepHeader activeStep>\n            {stepsTitleList && stepsTitleList[currentStep]}\n          </StepHeader>\n        )}\n        {currentStep === 0 && stepsLength > 1 && (\n          <StepHeader>\n            {stepsTitleList && stepsTitleList[currentStep + 1]}\n          </StepHeader>\n        )}\n      </StepHeaderWrapper>\n      {children}\n      <ButtonsWrapper isFirstStep={currentStep === 0}>\n        {currentStep !== 0 && (\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            text=\"Cofnij\"\n            onClick={prevStep}\n          />\n        )}\n        {currentStep !== lastStepIndex && (\n          <Button\n            disabled={nextButtonDisabled}\n            type=\"button\"\n            text=\"Dalej\"\n            onClick={nextStep}\n          />\n        )}\n        {currentStep === lastStepIndex && (\n          <Button disabled={nextButtonDisabled} type=\"submit\" text=\"WyÅ›lij\" />\n        )}\n      </ButtonsWrapper>\n    </Wrapper>\n  )\n}\n\nexport default Step\n"],"file":"index.js"}