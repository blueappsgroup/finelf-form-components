{"version":3,"sources":["../../../../src/components/Step/index.tsx"],"names":["React","useContext","useEffect","useRef","styled","Formik","Button","StepHeader","FormContext","setFormValuesToCache","getFormValuesFromCache","device","StyledForm","formStatuses","Wrapper","div","props","visible","ButtonsWrapper","mobileL","isFirstStep","tablet","StepHeaderWrapper","Step","children","stepIndex","onStepComplete","wrapperRef","id","currentStep","stepsLength","stepsTitleList","prevStep","nextStep","initialValues","setInitialValues","handleSubmit","formStatus","lastStepIndex","hideSubmitButton","agrrementsError","handleStepSubmit","values","current","window","scrollTo","offsetTop","isValid","toString"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useEffect, useRef } from 'react'\nimport styled from 'styled-components'\nimport { Formik } from 'formik'\n\nimport Button from '../Button'\nimport StepHeader from './StepHeader'\nimport { FormContext, setFormValuesToCache, getFormValuesFromCache } from '../../utils'\nimport { device } from '../../consts/sizes'\nimport { StyledForm } from '../Form'\nimport { FormValuesType } from '../../types'\nimport { formStatuses } from '../../consts/form'\n\nconst Wrapper = styled.div<{ visible: boolean }>`\n  display: ${(props): string => (props.visible ? 'block' : 'none')};\n`\n\ntype ButtonWrapperTypes = { isFirstStep: boolean }\n\n// prettier-ignore\nconst ButtonsWrapper = styled.div<ButtonWrapperTypes>`\n  display: flex;\n  flex-direction: column;\n  \n  & button {\n    flex-grow: 1;\n  }\n\n  @media ${device.mobileL} {\n    flex-direction: row;\n\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n    }\n  }\n\n  @media ${device.tablet} {\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n    }\n  }\n`\n\nconst StepHeaderWrapper = styled.div`\n  display: flex;\n`\n\ntype Props = {\n  stepIndex: number\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  children: any\n  onStepComplete?: () => void\n}\n\nconst Step: FC<Props> = ({ children, stepIndex, onStepComplete }) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const wrapperRef = useRef<any>(null)\n  const {\n    id,\n    currentStep = 0,\n    stepsLength = 1,\n    stepsTitleList,\n    prevStep,\n    nextStep,\n    initialValues,\n    setInitialValues,\n    handleSubmit,\n    formStatus,\n  } = useContext(FormContext)\n\n  const lastStepIndex = stepsLength ? stepsLength - 1 : 0\n  const hideSubmitButton = formStatus === formStatuses.agrrementsError\n  const handleStepSubmit = ({ values }: FormValuesType): void => {\n    if (currentStep === lastStepIndex) {\n      return handleSubmit && handleSubmit()\n    }\n    setFormValuesToCache(values, id)\n    setInitialValues && setInitialValues(getFormValuesFromCache(id))\n    onStepComplete && onStepComplete()\n    nextStep && nextStep()\n  }\n\n  useEffect(() => {\n    if (stepIndex === currentStep) {\n      wrapperRef.current !== null &&\n        window.scrollTo(0, wrapperRef.current.offsetTop)\n    }\n  }, [currentStep, stepIndex, formStatus])\n\n  return (\n    (stepIndex === currentStep && (\n      <Formik\n        validateOnMount\n        enableReinitialize\n        initialValues={initialValues}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        onSubmit={handleStepSubmit as any}\n        render={({ isValid }): React.ReactElement => {\n          return (\n            <StyledForm id={stepIndex.toString()}>\n              <Wrapper ref={wrapperRef} visible={stepIndex === currentStep}>\n                <StepHeaderWrapper>\n                  {currentStep !== 0 && (\n                    <StepHeader>\n                      {stepsTitleList && stepsTitleList[currentStep - 1]}\n                    </StepHeader>\n                  )}\n                  {stepIndex === currentStep && (\n                    <StepHeader activeStep>\n                      {stepsTitleList && stepsTitleList[currentStep]}\n                    </StepHeader>\n                  )}\n                  {currentStep === 0 && stepsLength > 1 && (\n                    <StepHeader>\n                      {stepsTitleList && stepsTitleList[currentStep + 1]}\n                    </StepHeader>\n                  )}\n                </StepHeaderWrapper>\n                {stepIndex === currentStep && children}\n                <ButtonsWrapper isFirstStep={currentStep === 0}>\n                  {currentStep !== 0 && (\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      text=\"Cofnij\"\n                      onClick={prevStep}\n                    />\n                  )}\n                  {currentStep !== lastStepIndex && !hideSubmitButton && (\n                    <Button\n                      form={stepIndex.toString()}\n                      disabled={!isValid}\n                      type=\"submit\"\n                      text=\"Dalej\"\n                    />\n                  )}\n                  {currentStep === lastStepIndex && !hideSubmitButton && (\n                    <Button disabled={!isValid} type=\"submit\" text=\"WyÅ›lij\" />\n                  )}\n                </ButtonsWrapper>\n              </Wrapper>\n            </StyledForm>\n          )\n        }}\n      />\n    )) || <></>\n  )\n}\n\nexport default Step\n"],"file":"index.js"}