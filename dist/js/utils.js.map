{"version":3,"sources":["../../src/utils.ts"],"names":["FormContext","React","createContext","setFormValuesToCache","values","formId","window","sessionStorage","setItem","JSON","stringify","getFormValuesFromCache","id","parse","getItem","resetFormValueCache","encodeData","data","Object","keys","map","key","encodeURIComponent","join","sendDataToAwsSQS","queueUrl","fetch","method","headers","body","Action","MessageBody","handleSendDataToApi","apiUrl","agreements","rest","mappedAgreements","reduce","acc","push","Accept","formName"],"mappings":";;;;;;;AAAA;;;;;;;;AAGO,IAAMA,WAQX,gBAAGC,eAAMC,aAAN,CAAoB,EAApB,CARE;;;;AAUA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAClCC,MADkC,EAElCC,MAFkC,EAGzB;AACTA,EAAAA,MAAM,IACJC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,gBAAsCH,MAAtC,GAAgDI,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAhD,CADF;AAED,CANM;;;;AAQA,IAAMO,sBAAsB,GAAG,SAAzBA,sBAAyB,CACpCC,EADoC;AAAA,SAGnCA,EAAE,IAAIH,IAAI,CAACI,KAAL,CAAWP,MAAM,CAACC,cAAP,CAAsBO,OAAtB,gBAAsCF,EAAtC,EAAX,CAAP,IACA,EAJoC;AAAA,CAA/B;;;;AAMA,IAAMG,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACH,EAAD;AAAA,SACjCN,MAAM,CAACC,cAAP,CAAsBC,OAAtB,gBAAsCI,EAAtC,GAA4C,IAA5C,CADiC;AAAA,CAA5B;;;;AAGA,IAAMI,UAAwD,GAAG,SAA3DA,UAA2D,CACtEC,IADsE,EAEnE;AACH,SAAOC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EACJG,GADI,CAEH,UAACC,GAAD;AAAA,WACEC,kBAAkB,CAACD,GAAD,CAAlB,GAA0B,GAA1B,GAAgCC,kBAAkB,CAACL,IAAI,CAACI,GAAD,CAAL,CADpD;AAAA,GAFG,EAKJE,IALI,CAKC,GALD,CAAP;AAMD,CATM;;;;AAWA,IAAMC,gBAII,GAAG,SAJPA,gBAIO,CAACpB,MAAD,EAASqB,QAAT;AAAA,SAClBC,KAAK,CACHD,QAAQ,IACN,wEAFC,EAGH;AACEE,IAAAA,MAAM,EAAE,MADV;AAEEC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFX;AAKEC,IAAAA,IAAI,EAAEb,UAAU,CAAC;AACfc,MAAAA,MAAM,EAAE,aADO;AAEfC,MAAAA,WAAW,EAAEtB,IAAI,CAACC,SAAL,CAAeN,MAAf;AAFE,KAAD;AALlB,GAHG,CADa;AAAA,CAJb;;;;AAoBA,IAAM4B,mBAKI,GAAG,SALPA,mBAKO,CAAC5B,MAAD,EAAS6B,MAAT,EAAiB5B,MAAjB,EAA4B;AAAA,MACtC6B,UADsC,GACd9B,MADc,CACtC8B,UADsC;AAAA,MACvBC,IADuB,4BACd/B,MADc,mBAE9C;;;AACA,MAAMgC,gBAAgB,GAAGlB,MAAM,CAACC,IAAP,CAAYe,UAAZ,EAAwBG,MAAxB,CAAoC,UAACC,GAAD,EAAMjB,GAAN,EAAc;AACzE,QAAIA,GAAG,KAAK,WAAR,IAAuBa,UAAU,CAACb,GAAD,CAArC,EAA4C;AAC1CiB,MAAAA,GAAG,CAACC,IAAJ,CAASlB,GAAT;AACD;;AACD,WAAOiB,GAAP;AACD,GALwB,EAKtB,EALsB,CAAzB;AAOA,SAAOZ,KAAK,WAAIO,MAAJ,oBAAoB5B,MAApB,YAAmC;AAC7CsB,IAAAA,MAAM,EAAE,MADqC;AAE7CC,IAAAA,OAAO,EAAE;AACPY,MAAAA,MAAM,EAAE,kBADD;AAEP,sBAAgB;AAFT,KAFoC;AAM7CX,IAAAA,IAAI,EAAEpB,IAAI,CAACC,SAAL,CAAe;AACnB+B,MAAAA,QAAQ,EAAEpC,MADS;AAEnBY,MAAAA,IAAI,EAAEkB,IAFa;AAGnBD,MAAAA,UAAU,EAAEE;AAHO,KAAf;AANuC,GAAnC,CAAZ;AAYD,CA3BM","sourcesContent":["import React, { Context } from 'react'\nimport { FormValuesType } from './types'\n\nexport const FormContext: Context<{\n  id?: string\n  stepsLength?: number\n  currentStep?: number\n  stepsTitleList?: string[]\n  nextStep?: Function\n  prevStep?: Function\n  apiUrl?: string\n}> = React.createContext({})\n\nexport const setFormValuesToCache = (\n  values: { [key: string]: string | boolean | undefined },\n  formId?: string\n): void => {\n  formId &&\n    window.sessionStorage.setItem(`form-${formId}`, JSON.stringify(values))\n}\n\nexport const getFormValuesFromCache = (\n  id?: string\n): { [key: string]: string | boolean } =>\n  (id && JSON.parse(window.sessionStorage.getItem(`form-${id}`) as string)) ||\n  {}\n\nexport const resetFormValueCache = (id: string): void =>\n  window.sessionStorage.setItem(`form-${id}`, '{}')\n\nexport const encodeData: (data: FormValuesType) => string | undefined = (\n  data\n) => {\n  return Object.keys(data)\n    .map(\n      (key) =>\n        encodeURIComponent(key) + '=' + encodeURIComponent(data[key] as string)\n    )\n    .join('&')\n}\n\nexport const sendDataToAwsSQS: (\n  values: FormValuesType,\n  queueUrl?: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) => Promise<any> = (values, queueUrl) =>\n  fetch(\n    queueUrl ||\n      'https://sqs.eu-central-1.amazonaws.com/031738021372/finelf-users-queue',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: encodeData({\n        Action: 'SendMessage',\n        MessageBody: JSON.stringify(values),\n      }),\n    }\n  )\n\nexport const handleSendDataToApi: (\n  values: FormValuesType,\n  apiUrl: string,\n  formId: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) => Promise<any> = (values, apiUrl, formId) => {\n  const { agreements, ...rest } = values\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mappedAgreements = Object.keys(agreements).reduce<any>((acc, key) => {\n    if (key !== 'selectAll' && agreements[key]) {\n      acc.push(key)\n    }\n    return acc\n  }, [])\n\n  return fetch(`${apiUrl}/forms/${formId}/data`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      formName: formId,\n      data: rest,\n      agreements: mappedAgreements,\n    }),\n  })\n}\n"],"file":"utils.js"}