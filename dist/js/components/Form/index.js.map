{"version":3,"sources":["../../../../src/components/Form/index.tsx"],"names":["StyledForm","Form","props","theme","formBgColor","device","tablet","FormWrapper","children","onSubmit","customTheme","id","stepsLength","stepsTitles","hasRedirect","redirectUrl","timeToRedirect","redirectHeaderText","logoImg","redirectMainImg","redirectBgImg","queueUrl","sendDataToSQS","initialValues","setInitialValues","currentStep","setCurrentStep","handleSubmit","values","resetForm","setStatus","formStatuses","submited","console","log","error","handleReset","prevStep","nextStep","stepsTitleList","status"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,GAAG,+BAAOC,YAAP,CAAH,oBAMA,UAACC,KAAD;AAAA,SAAmBA,KAAK,CAACC,KAAN,CAAYC,WAA/B;AAAA,CANA,EAcLC,cAAOC,MAdF,CAAhB;;AAoBA,IAAMC,WAA0B,GAAG,SAA7BA,WAA6B,OAgB7B;AAAA,MAfJC,QAeI,QAfJA,QAeI;AAAA,MAdJC,QAcI,QAdJA,QAcI;AAAA,MAbJC,WAaI,QAbJA,WAaI;AAAA,MAZJC,EAYI,QAZJA,EAYI;AAAA,MAXJC,WAWI,QAXJA,WAWI;AAAA,MAVJC,WAUI,QAVJA,WAUI;AAAA,MATJC,WASI,QATJA,WASI;AAAA,MARJC,WAQI,QARJA,WAQI;AAAA,MAPJC,cAOI,QAPJA,cAOI;AAAA,MANJC,kBAMI,QANJA,kBAMI;AAAA,MALJC,OAKI,QALJA,OAKI;AAAA,MAJJC,eAII,QAJJA,eAII;AAAA,MAHJC,aAGI,QAHJA,aAGI;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,aACI,QADJA,aACI;;AAAA,kBACsC,qBAAS,mCAAuBX,EAAvB,CAAT,CADtC;AAAA;AAAA,MACGY,aADH;AAAA,MACkBC,gBADlB;;AAAA,mBAEkC,qBAAS,CAAT,CAFlC;AAAA;AAAA,MAEGC,WAFH;AAAA,MAEgBC,cAFhB;;AAIJ,MAAMC,YAAY;AAAA,wEAAG,iBACnBC,MADmB,EAEnB1B,KAFmB;AAAA;AAAA;AAAA;AAAA;AAQnB,kBAAIO,QAAJ,EAAc;AACZA,gBAAAA,QAAQ,CAACmB,MAAD,EAAS1B,KAAT,CAAR;AACD;;AAVkB;;AAAA,mBAaboB,aAba;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAcT,6BAAiBM,MAAjB,EAAyBP,QAAzB,CAdS;;AAAA;AAiBjBnB,cAAAA,KAAK,CAAC2B,SAAN;AACA3B,cAAAA,KAAK,CAAC4B,SAAN,CAAgBC,mBAAaC,QAA7B;AAlBiB;AAAA;;AAAA;AAAA;AAAA;AAoBjBC,cAAAA,OAAO,CAACC,GAAR;AACAhC,cAAAA,KAAK,CAAC4B,SAAN,CAAgBC,mBAAaI,KAA7B;;AArBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZR,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAwBA,MAAMS,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC9B,oCAAoBzB,EAApB;AACAa,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,GAHD;;AAKA,MAAMa,QAAkB,GAAG,SAArBA,QAAqB;AAAA,WAAMX,cAAc,CAACD,WAAW,GAAG,CAAf,CAApB;AAAA,GAA3B;;AAEA,MAAMa,QAAkB,GAAG,SAArBA,QAAqB;AAAA,WAAMZ,cAAc,CAACD,WAAW,GAAG,CAAf,CAApB;AAAA,GAA3B;;AAEA,sBACE,6BAAC,kBAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLd,MAAAA,EAAE,EAAFA,EADK;AAELC,MAAAA,WAAW,EAAXA,WAFK;AAGLa,MAAAA,WAAW,EAAXA,WAHK;AAILc,MAAAA,cAAc,EAAE1B,WAJX;AAKLyB,MAAAA,QAAQ,EAARA,QALK;AAMLD,MAAAA,QAAQ,EAARA;AANK;AADT,kBAUE,6BAAC,oBAAD;AAAe,IAAA,WAAW,oBAAO3B,WAAP;AAA1B,kBACE,6BAAC,cAAD;AACE,IAAA,kBAAkB,MADpB;AAEE,IAAA,aAAa,EAAEa,aAFjB;AAGE,IAAA,QAAQ,EAAEI,YAHZ;AAIE,IAAA,OAAO,EAAES;AAJX,KAMG,UAAClC,KAAD;AAAA,WACEY,WAAW,IAAIZ,KAAK,CAACsC,MAAN,KAAiBT,mBAAaC,QAA7C,iBACC,6BAAC,qBAAD;AACE,MAAA,WAAW,EAAEjB,WADf;AAEE,MAAA,eAAe,EAAEK,aAFnB;AAGE,MAAA,OAAO,EAAEF,OAHX;AAIE,MAAA,UAAU,EAAED,kBAJd;AAKE,MAAA,cAAc,EAAED,cALlB;AAME,MAAA,OAAO,EAAEG;AANX,MADF,iBASM,6BAAC,UAAD;AAAY,MAAA,EAAE,EAAER;AAAhB,OAAqBH,QAArB,CAVP;AAAA,GANH,CADF,CAVF,CADF;AAkCD,CAvFD;;eAyFeD,W","sourcesContent":["import React, { FC, ReactElement, useState } from 'react'\nimport { Formik, Form } from 'formik'\nimport styled from 'styled-components'\n\nimport { ThemeProvider } from '../../consts/theme'\nimport { device } from '../../consts/sizes'\nimport { FormProps, FormValuesType } from '../../types'\nimport RedirectPage from '../RedirectPage'\nimport {\n  FormContext,\n  getFormValuesFromCache,\n  resetFormValueCache,\n  sendDataToAwsSQS,\n} from '../../utils'\nimport { formStatuses } from '../../consts/form'\n\nconst StyledForm = styled(Form)`\n  display: flex;\n  flex-direction: column;\n  max-width: 600px;\n  justify-self: center;\n  margin: 0 10px;\n  background: ${(props): string => props.theme.formBgColor};\n  font-family: 'Manrope', BlinkMacSystemFont, -apple-system, 'Segoe UI',\n    'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n  padding: 20px 15px;\n  border-radius: 6px;\n  box-shadow: 0px 20px 60px rgba(0, 0, 0, 0.08);\n\n  @media ${device.tablet} {\n    padding: 20px 30px;\n    margin: 0 auto;\n  }\n`\n\nconst FormWrapper: FC<FormProps> = ({\n  children,\n  onSubmit,\n  customTheme,\n  id,\n  stepsLength,\n  stepsTitles,\n  hasRedirect,\n  redirectUrl,\n  timeToRedirect,\n  redirectHeaderText,\n  logoImg,\n  redirectMainImg,\n  redirectBgImg,\n  queueUrl,\n  sendDataToSQS,\n}) => {\n  const [initialValues, setInitialValues] = useState(getFormValuesFromCache(id))\n  const [currentStep, setCurrentStep] = useState(0)\n\n  const handleSubmit = async (\n    values: FormValuesType,\n    props: {\n      resetForm: () => void\n      setStatus: (status: string) => void\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): Promise<any> => {\n    if (onSubmit) {\n      onSubmit(values, props)\n    }\n\n    try {\n      if (sendDataToSQS) {\n        await sendDataToAwsSQS(values, queueUrl)\n      }\n\n      props.resetForm()\n      props.setStatus(formStatuses.submited)\n    } catch (e) {\n      console.log(e)\n      props.setStatus(formStatuses.error)\n    }\n  }\n  const handleReset = (): void => {\n    resetFormValueCache(id)\n    setInitialValues({})\n  }\n\n  const prevStep: Function = () => setCurrentStep(currentStep - 1)\n\n  const nextStep: Function = () => setCurrentStep(currentStep + 1)\n\n  return (\n    <FormContext.Provider\n      value={{\n        id,\n        stepsLength,\n        currentStep,\n        stepsTitleList: stepsTitles,\n        nextStep,\n        prevStep,\n      }}\n    >\n      <ThemeProvider customTheme={{ ...customTheme }}>\n        <Formik\n          enableReinitialize\n          initialValues={initialValues}\n          onSubmit={handleSubmit}\n          onReset={handleReset}\n        >\n          {(props): ReactElement =>\n            (hasRedirect && props.status === formStatuses.submited && (\n              <RedirectPage\n                redirectUrl={redirectUrl}\n                backgroundImage={redirectBgImg}\n                logoImg={logoImg}\n                headerText={redirectHeaderText}\n                timeToRedirect={timeToRedirect}\n                mainImg={redirectMainImg}\n              />\n            )) || <StyledForm id={id}>{children}</StyledForm>\n          }\n        </Formik>\n      </ThemeProvider>\n    </FormContext.Provider>\n  )\n}\n\nexport default FormWrapper\n"],"file":"index.js"}