{"version":3,"sources":["../../../../src/components/OptionalGroup/index.tsx"],"names":["OptionalGroup","name","label","children","hideChecked","values","setValues","validateForm","FormContext","id","hasManyItems","Array","isArray","itemsNames","map","item","props","itemsForResetValues","reduce","acc","undefined","groupVisible","newValues","groupType","defaultProps"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;AAWA,IAAMA,aAA8B,GAAG,SAAjCA,aAAiC,OAKjC;AAAA,MAJJC,IAII,QAJJA,IAII;AAAA,MAHJC,KAGI,QAHJA,KAGI;AAAA,MAFJC,QAEI,QAFJA,QAEI;AAAA,MADJC,WACI,QADJA,WACI;;AACJ;AADI,0BAEwC,+BAFxC;AAAA,MAEIC,MAFJ,qBAEIA,MAFJ;AAAA,MAEYC,SAFZ,qBAEYA,SAFZ;AAAA,MAEuBC,YAFvB,qBAEuBA,YAFvB;;AAAA,oBAGW,uBAAWC,kBAAX,CAHX;AAAA,MAGIC,EAHJ,eAGIA,EAHJ;;AAIJ,MAAMC,YAAY,GAAGC,KAAK,CAACC,OAAN,CAAcT,QAAd,CAArB;AACA,MAAMU,UAAoB,GAAG,oBAC3B;AAAA,WACEH,YAAY,GACRP,QAAQ,IACRA,QAAQ,CAACW,GAAT,CAAa,UAACC,IAAD;AAAA,aAAuCA,IAAI,CAACC,KAAL,CAAWf,IAAlD;AAAA,KAAb,CAFQ,GAGR,CAACE,QAAQ,CAACa,KAAT,CAAef,IAAhB,CAJN;AAAA,GAD2B,EAM3B,CAACS,YAAD,EAAeP,QAAf,CAN2B,CAA7B;AASA,MAAMc,mBAAmB,GAAG,oBAC1B;AAAA,WACEJ,UAAU,CAACK,MAAX,CAAkB,UAACC,GAAD,EAAMJ,IAAN,EAAe;AAC/BI,MAAAA,GAAG,CAACJ,IAAD,CAAH,GAAYK,SAAZ;AACA,aAAOD,GAAP,CAF+B,CAG/B;AACD,KAJD,EAIG,EAJH,CADF;AAAA,GAD0B,EAO1B,CAACN,UAAD,CAP0B,CAA5B;AASA,MAAMQ,YAAY,GACfjB,WAAW,IAAI,CAACC,MAAM,CAACJ,IAAD,CAAvB,IAAmC,CAACG,WAAD,IAAgBC,MAAM,CAACJ,IAAD,CAD3D;AAGA,wBAAU,YAAM;AACd,QAAI,CAACoB,YAAL,EAAmB;AACjB,UAAMC,SAAS,mCAAQjB,MAAR,GAAmBY,mBAAnB,CAAf;;AACAX,MAAAA,SAAS,CAACgB,SAAD,EAAY,KAAZ,CAAT;AACA,uCAAqBA,SAArB,EAAgCb,EAAhC;AACD,KALa,CAMd;;AACD,GAPD,EAOG,CAACY,YAAD,EAAeJ,mBAAf,EAAoCX,SAApC,EAA+CD,MAAM,CAACJ,IAAD,CAArD,CAPH;AASA,wBAAU,YAAM;AACdM,IAAAA,YAAY,GADE,CAEd;AACD,GAHD,EAGG,CAACF,MAAM,CAACJ,IAAD,CAAP,CAHH;AAKA,sBACE,yEACE,6BAAC,eAAD;AACE,IAAA,eAAe,MADjB;AAEE,IAAA,eAAe,MAFjB;AAGE,IAAA,EAAE,EAAEA,IAHN;AAIE,IAAA,IAAI,EAAEA,IAJR;AAKE,IAAA,KAAK,EAAEC;AALT,IADF,EAQGmB,YAAY,iBAAI,4DAAGlB,QAAH,CARnB,CADF;AAYD,CAzDD;;;AAREF,EAAAA,I;AAEAE,EAAAA,Q;AACAD,EAAAA,K;AACAqB,EAAAA,S;AACAnB,EAAAA,W;;AA8DFJ,aAAa,CAACwB,YAAd,GAA6B;AAC3BD,EAAAA,SAAS,EAAE;AADgB,CAA7B;eAIevB,a","sourcesContent":["import React, { useContext, useEffect, useMemo } from 'react'\nimport { useFormikContext } from 'formik'\nimport { CheckboxField } from '../'\nimport { FormContext, setFormValuesToCache } from '../../utils'\n\ntype Props = {\n  name: string\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  children: any\n  label: string\n  groupType?: string\n  hideChecked?: boolean\n}\n\nconst OptionalGroup: React.FC<Props> = ({\n  name,\n  label,\n  children,\n  hideChecked,\n}) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { values, setValues, validateForm } = useFormikContext<any>()\n  const { id } = useContext(FormContext)\n  const hasManyItems = Array.isArray(children)\n  const itemsNames: string[] = useMemo(\n    () =>\n      hasManyItems\n        ? children &&\n          children.map((item: { props: { name: string } }) => item.props.name)\n        : [children.props.name],\n    [hasManyItems, children]\n  )\n\n  const itemsForResetValues = useMemo(\n    () =>\n      itemsNames.reduce((acc, item) => {\n        acc[item] = undefined\n        return acc\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      }, {} as { [key: string]: any }),\n    [itemsNames]\n  )\n  const groupVisible =\n    (hideChecked && !values[name]) || (!hideChecked && values[name])\n\n  useEffect(() => {\n    if (!groupVisible) {\n      const newValues = { ...values, ...itemsForResetValues }\n      setValues(newValues, false)\n      setFormValuesToCache(newValues, id)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [groupVisible, itemsForResetValues, setValues, values[name]])\n\n  useEffect(() => {\n    validateForm()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [values[name]])\n\n  return (\n    <>\n      <CheckboxField\n        disableCollapse\n        skipFieldForApi\n        id={name}\n        name={name}\n        label={label}\n      />\n      {groupVisible && <>{children}</>}\n    </>\n  )\n}\n\nOptionalGroup.defaultProps = {\n  groupType: 'optionalGroup',\n}\n\nexport default OptionalGroup\n"],"file":"index.js"}