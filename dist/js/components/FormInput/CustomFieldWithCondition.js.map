{"version":3,"sources":["../../../../src/components/FormInput/CustomFieldWithCondition.tsx"],"names":["CustomFieldWithCondition","props","values","errors","setErrors","setValues","FormContext","id","required","setRequired","visibleCondition","visible","setVisible","requiredCondition","isRequired","Object","keys","some","key","includes","name","isVisible","undefined","validate"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useEffect, useState } from 'react'\nimport { Field, useFormikContext } from 'formik'\nimport { FormContext, setFormValuesToCache } from '../../utils'\n\ntype Props = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  requiredCondition?: { [key: string]: any }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  visibleCondition?: { [key: string]: any }\n}\nconst CustomFieldWithCondition: FC<Props> = (props) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { values, errors, setErrors, setValues } = useFormikContext<any>()\n  const { id } = useContext(FormContext)\n  const [required, setRequired] = useState(props.required || false)\n  const [visible, setVisible] = useState<boolean>(\n    (props.visibleCondition && false) || true\n  )\n\n  useEffect(() => {\n    if (!props.required && props.requiredCondition) {\n      let isRequired = false\n\n      Object.keys(props.requiredCondition).some((key) => {\n        if (\n          props.requiredCondition &&\n          props.requiredCondition[key].includes(values[key])\n        ) {\n          isRequired = true\n          return true\n        }\n\n        return false\n      })\n\n      if (required !== isRequired) {\n        setRequired(isRequired)\n      }\n    }\n  }, [values, props.required, props.requiredCondition, required, props.name])\n\n  useEffect(() => {\n    if (props.visibleCondition) {\n      let isVisible = false\n\n      Object.keys(props.visibleCondition).some((key) => {\n        if (\n          props.visibleCondition &&\n          props.visibleCondition[key].includes(values[key])\n        ) {\n          isVisible = true\n\n          return true\n        }\n\n        return false\n      })\n\n      if (!isVisible && isVisible !== visible) {\n        setValues({ ...values, [props.name]: undefined }, false)\n        setErrors({ ...errors, [props.name]: undefined })\n        setFormValuesToCache({ ...values, [props.name]: undefined }, id)\n        setVisible(isVisible)\n      }\n\n      if (isVisible && isVisible !== visible) {\n        setVisible(isVisible)\n      }\n    }\n  }, [\n    values,\n    setValues,\n    props.visibleCondition,\n    props.name,\n    visible,\n    errors,\n    setErrors,\n    id,\n  ])\n\n  return (\n    <Field\n      {...props}\n      required={required && visible}\n      validate={props.validate(required && visible)}\n      visible={visible}\n    />\n  )\n}\n\nexport default CustomFieldWithCondition\n"],"file":"CustomFieldWithCondition.js"}