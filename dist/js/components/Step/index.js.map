{"version":3,"sources":["../../../../src/components/Step/index.tsx"],"names":["Wrapper","styled","div","props","visible","ButtonsWrapper","device","mobileL","isFirstStep","tablet","StepHeaderWrapper","Step","children","stepIndex","onStepComplete","wrapperRef","FormContext","id","currentStep","stepsLength","stepsTitleList","prevStep","nextStep","initialValues","handleSubmit","formStatus","lastStepIndex","hideSubmitButton","formStatuses","agrrementsError","handleStepSubmit","values","current","window","scrollTo","offsetTop","isValid","toString"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useEffect, useRef } from 'react'\nimport styled from 'styled-components'\nimport { Formik } from 'formik'\n\nimport Button from '../Button'\nimport StepHeader from './StepHeader'\nimport { FormContext, setFormValuesToCache } from '../../utils'\nimport { device } from '../../consts/sizes'\nimport { StyledForm } from '../Form'\nimport { FormValuesType } from '../../types'\nimport { formStatuses } from '../../consts/form'\n\nconst Wrapper = styled.div<{ visible: boolean }>`\n  display: ${(props): string => (props.visible ? 'block' : 'none')};\n`\n\ntype ButtonWrapperTypes = { isFirstStep: boolean }\n\n// prettier-ignore\nconst ButtonsWrapper = styled.div<ButtonWrapperTypes>`\n  display: flex;\n  flex-direction: column;\n  \n  & button {\n    flex-grow: 1;\n  }\n\n  @media ${device.mobileL} {\n    flex-direction: row;\n\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '15px'};\n      }\n    }\n  }\n\n  @media ${device.tablet} {\n    & button {\n      &:first-of-type {\n        margin-right: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n\n      &:last-child {\n        margin-left: ${(props: ButtonWrapperTypes): string => props.isFirstStep ? '0px' : '30px'};\n      }\n    }\n  }\n`\n\nconst StepHeaderWrapper = styled.div`\n  display: flex;\n`\n\ntype Props = {\n  stepIndex: number\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  children: any\n  onStepComplete?: () => void\n}\n\nconst Step: FC<Props> = ({ children, stepIndex, onStepComplete }) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const wrapperRef = useRef<any>(null)\n  const {\n    id,\n    currentStep = 0,\n    stepsLength = 1,\n    stepsTitleList,\n    prevStep,\n    nextStep,\n    initialValues,\n    handleSubmit,\n    formStatus,\n  } = useContext(FormContext)\n\n  const lastStepIndex = stepsLength ? stepsLength - 1 : 0\n  const hideSubmitButton = formStatus === formStatuses.agrrementsError\n  const handleStepSubmit = ({ values }: FormValuesType): void => {\n    if (currentStep === lastStepIndex) {\n      return handleSubmit && handleSubmit()\n    }\n    setFormValuesToCache(values, id)\n    onStepComplete && onStepComplete()\n    nextStep && nextStep()\n  }\n\n  useEffect(() => {\n    if (stepIndex === currentStep) {\n      wrapperRef.current !== null &&\n        window.scrollTo(0, wrapperRef.current.offsetTop)\n    }\n  }, [currentStep, stepIndex, formStatus])\n\n  return (\n    (stepIndex === currentStep && (\n      <Formik\n        validateOnMount\n        enableReinitialize\n        initialValues={initialValues}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        onSubmit={handleStepSubmit as any}\n        render={({ isValid }): React.ReactElement => {\n          return (\n            <StyledForm id={stepIndex.toString()}>\n              <Wrapper ref={wrapperRef} visible={stepIndex === currentStep}>\n                <StepHeaderWrapper>\n                  {currentStep !== 0 && (\n                    <StepHeader>\n                      {stepsTitleList && stepsTitleList[currentStep - 1]}\n                    </StepHeader>\n                  )}\n                  {stepIndex === currentStep && (\n                    <StepHeader activeStep>\n                      {stepsTitleList && stepsTitleList[currentStep]}\n                    </StepHeader>\n                  )}\n                  {currentStep === 0 && stepsLength > 1 && (\n                    <StepHeader>\n                      {stepsTitleList && stepsTitleList[currentStep + 1]}\n                    </StepHeader>\n                  )}\n                </StepHeaderWrapper>\n                {stepIndex === currentStep && children}\n                <ButtonsWrapper isFirstStep={currentStep === 0}>\n                  {currentStep !== 0 && (\n                    <Button\n                      type=\"button\"\n                      variant=\"secondary\"\n                      text=\"Cofnij\"\n                      onClick={prevStep}\n                    />\n                  )}\n                  {currentStep !== lastStepIndex && !hideSubmitButton && (\n                    <Button\n                      form={stepIndex.toString()}\n                      disabled={!isValid}\n                      type=\"submit\"\n                      text=\"Dalej\"\n                    />\n                  )}\n                  {currentStep === lastStepIndex && !hideSubmitButton && (\n                    <Button disabled={!isValid} type=\"submit\" text=\"WyÅ›lij\" />\n                  )}\n                </ButtonsWrapper>\n              </Wrapper>\n            </StyledForm>\n          )\n        }}\n      />\n    )) || <></>\n  )\n}\n\nexport default Step\n"],"file":"index.js"}